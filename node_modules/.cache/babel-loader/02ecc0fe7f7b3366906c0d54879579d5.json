{"ast":null,"code":"import { restaurantSlice } from \"..\";\nimport { normolize } from \"../../utils/normolize\";\nimport { selectRestaurantIds } from \"../selectors\";\nexport const loadRestaurantsIfNotExist = (dispatch, getState) => {\n  var _selectRestaurantIds;\n\n  if (((_selectRestaurantIds = selectRestaurantIds(getState())) === null || _selectRestaurantIds === void 0 ? void 0 : _selectRestaurantIds.length) > 0) {\n    return;\n  }\n\n  restaurantSlice;\n  dispatch(startLoading());\n  fetch(\"http://localhost:3001/api/restaurants/\").then(response => response.json()).then(restaurants => {\n    console.log(restaurants);\n    dispatch(successLoading(normolize(restaurants)));\n  }).catch(() => {\n    console.log(\"error\");\n    dispatch(failLoading());\n  });\n};","map":{"version":3,"names":["restaurantSlice","normolize","selectRestaurantIds","loadRestaurantsIfNotExist","dispatch","getState","length","startLoading","fetch","then","response","json","restaurants","console","log","successLoading","catch","failLoading"],"sources":["/Users/Arina.Karmanova/Documents/react-2022-09-22/src/store/restaurant/middlewares/loadRestaurantsIfNotExist.js"],"sourcesContent":["import { restaurantSlice } from \"..\";\nimport { normolize } from \"../../utils/normolize\";\nimport { selectRestaurantIds } from \"../selectors\";\n\nexport const loadRestaurantsIfNotExist = (dispatch, getState) => {\n  if (selectRestaurantIds(getState())?.length > 0) {\n    return;\n  }\n\n  restaurantSlice\n  dispatch(startLoading());\n\n  fetch(\"http://localhost:3001/api/restaurants/\")\n    .then((response) => response.json())\n    .then((restaurants) => {\n      console.log(restaurants);\n      dispatch(successLoading(normolize(restaurants)));\n    })\n    .catch(() => {\n      console.log(\"error\");\n      dispatch(failLoading());\n    });\n};\n"],"mappings":"AAAA,SAASA,eAAT,QAAgC,IAAhC;AACA,SAASC,SAAT,QAA0B,uBAA1B;AACA,SAASC,mBAAT,QAAoC,cAApC;AAEA,OAAO,MAAMC,yBAAyB,GAAG,CAACC,QAAD,EAAWC,QAAX,KAAwB;EAAA;;EAC/D,IAAI,yBAAAH,mBAAmB,CAACG,QAAQ,EAAT,CAAnB,8EAAiCC,MAAjC,IAA0C,CAA9C,EAAiD;IAC/C;EACD;;EAEDN,eAAe;EACfI,QAAQ,CAACG,YAAY,EAAb,CAAR;EAEAC,KAAK,CAAC,wCAAD,CAAL,CACGC,IADH,CACSC,QAAD,IAAcA,QAAQ,CAACC,IAAT,EADtB,EAEGF,IAFH,CAESG,WAAD,IAAiB;IACrBC,OAAO,CAACC,GAAR,CAAYF,WAAZ;IACAR,QAAQ,CAACW,cAAc,CAACd,SAAS,CAACW,WAAD,CAAV,CAAf,CAAR;EACD,CALH,EAMGI,KANH,CAMS,MAAM;IACXH,OAAO,CAACC,GAAR,CAAY,OAAZ;IACAV,QAAQ,CAACa,WAAW,EAAZ,CAAR;EACD,CATH;AAUD,CAlBM"},"metadata":{},"sourceType":"module"}