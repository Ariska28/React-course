{"ast":null,"code":"import { LoadingStatuses } from \"../constants/loadingStatuses\";\nimport { selectReviewEntities } from \"../review/selectors\";\nimport { createSelector } from \"reselect\";\nexport const selectRestaurantModule = state => state.restaurant;\nexport const selectRestaurantById = (state, _ref) => {\n  let {\n    restaurantId\n  } = _ref;\n  return selectRestaurantModule(state).entities[restaurantId];\n};\nexport const selectRestaurantNameById = (state, _ref2) => {\n  var _selectRestaurantById;\n\n  let {\n    restaurantId\n  } = _ref2;\n  return (_selectRestaurantById = selectRestaurantById(state, {\n    restaurantId\n  })) === null || _selectRestaurantById === void 0 ? void 0 : _selectRestaurantById.name;\n};\nexport const selectRestaurantDescriptionById = (state, _ref3) => {\n  var _selectRestaurantById2;\n\n  let {\n    restaurantId\n  } = _ref3;\n  return (_selectRestaurantById2 = selectRestaurantById(state, {\n    restaurantId\n  })) === null || _selectRestaurantById2 === void 0 ? void 0 : _selectRestaurantById2.description;\n};\nexport const selectRestaurantIds = state => selectRestaurantModule(state).ids;\nexport const selectRestaurantIdsFilteredByName = (state, _ref4) => {\n  let {\n    restaurantName\n  } = _ref4;\n  return Object.values(selectRestaurantModule(state).entities).filter(_ref5 => {\n    let {\n      name\n    } = _ref5;\n    return name.toLowerCase().indexOf(restaurantName.toLowerCase()) !== -1;\n  }).map(_ref6 => {\n    let {\n      id\n    } = _ref6;\n    return id;\n  });\n};\nexport const selectMenuByRestaurantId = (state, _ref7) => {\n  var _selectRestaurantById3;\n\n  let {\n    restaurantId\n  } = _ref7;\n  return (_selectRestaurantById3 = selectRestaurantById(state, {\n    restaurantId\n  })) === null || _selectRestaurantById3 === void 0 ? void 0 : _selectRestaurantById3.menu;\n};\nexport const selectReviewsByRestaurantId = (state, _ref8) => {\n  var _selectRestaurantById4;\n\n  let {\n    restaurantId\n  } = _ref8;\n  return (_selectRestaurantById4 = selectRestaurantById(state, {\n    restaurantId\n  })) === null || _selectRestaurantById4 === void 0 ? void 0 : _selectRestaurantById4.reviews;\n};\nexport const selectRestaurantLoadingStatus = state => selectRestaurantModule(state).status;\nexport const selectIsRestaurantLoading = state => selectRestaurantModule(state).status === LoadingStatuses.inProgress;\nexport const selectRestaurantRating = (state, _ref9) => {\n  let {\n    restaurantId\n  } = _ref9;\n  const restaurantReviewIds = selectReviewsByRestaurantId(state, {\n    restaurantId\n  });\n  const reviewEntities = selectReviewEntities(state);\n  return Math.floor(restaurantReviewIds.reduce((ratingSum, reviewId) => {\n    var _reviewEntities$revie;\n\n    return ratingSum + ((_reviewEntities$revie = reviewEntities[reviewId]) === null || _reviewEntities$revie === void 0 ? void 0 : _reviewEntities$revie.rating) || 0;\n  }, 0) / restaurantReviewIds.length);\n};\nexport const selectRestaurantRatingMemoCreater = () => createSelector([selectReviewsByRestaurantId, selectReviewEntities], (restaurantReviewIds, reviewEntities) => Math.floor(restaurantReviewIds.reduce((ratingSum, reviewId) => {\n  var _reviewEntities$revie2;\n\n  return ratingSum + ((_reviewEntities$revie2 = reviewEntities[reviewId]) === null || _reviewEntities$revie2 === void 0 ? void 0 : _reviewEntities$revie2.rating) || 0;\n}, 0) / restaurantReviewIds.length));","map":{"version":3,"names":["LoadingStatuses","selectReviewEntities","createSelector","selectRestaurantModule","state","restaurant","selectRestaurantById","restaurantId","entities","selectRestaurantNameById","name","selectRestaurantDescriptionById","description","selectRestaurantIds","ids","selectRestaurantIdsFilteredByName","restaurantName","Object","values","filter","toLowerCase","indexOf","map","id","selectMenuByRestaurantId","menu","selectReviewsByRestaurantId","reviews","selectRestaurantLoadingStatus","status","selectIsRestaurantLoading","inProgress","selectRestaurantRating","restaurantReviewIds","reviewEntities","Math","floor","reduce","ratingSum","reviewId","rating","length","selectRestaurantRatingMemoCreater"],"sources":["/Users/Arina.Karmanova/Documents/react-2022-09-22/src/store/restaurant/selectors.js"],"sourcesContent":["import { LoadingStatuses } from \"../constants/loadingStatuses\";\nimport { selectReviewEntities } from \"../review/selectors\";\nimport { createSelector } from \"reselect\";\n\nexport const selectRestaurantModule = (state) => state.restaurant;\n\nexport const selectRestaurantById = (state, { restaurantId }) =>\n  selectRestaurantModule(state).entities[restaurantId];\n\nexport const selectRestaurantNameById = (state, { restaurantId }) =>\n  selectRestaurantById(state, { restaurantId })?.name;\n\n  export const selectRestaurantDescriptionById = (state, {restaurantId}) =>\n  selectRestaurantById(state, {restaurantId})?.description;\n\nexport const selectRestaurantIds = (state) => selectRestaurantModule(state).ids;\n\nexport const selectRestaurantIdsFilteredByName = (\n  state,\n  { restaurantName }\n) => {\n  return Object.values(selectRestaurantModule(state).entities)\n    .filter(\n      ({ name }) =>\n        name.toLowerCase().indexOf(restaurantName.toLowerCase()) !== -1\n    )\n    .map(({ id }) => id);\n};\n\nexport const selectMenuByRestaurantId = (state, { restaurantId }) =>\n  selectRestaurantById(state, { restaurantId })?.menu;\n\nexport const selectReviewsByRestaurantId = (state, { restaurantId }) =>\n  selectRestaurantById(state, { restaurantId })?.reviews;\n\nexport const selectRestaurantLoadingStatus = (state) =>\n  selectRestaurantModule(state).status;\n\nexport const selectIsRestaurantLoading = (state) =>\n  selectRestaurantModule(state).status === LoadingStatuses.inProgress;\n\nexport const selectRestaurantRating = (state, { restaurantId }) => {\n  const restaurantReviewIds = selectReviewsByRestaurantId(state, {\n    restaurantId,\n  });\n  const reviewEntities = selectReviewEntities(state);\n\n  return Math.floor(\n    restaurantReviewIds.reduce(\n      (ratingSum, reviewId) =>\n        ratingSum + reviewEntities[reviewId]?.rating || 0,\n      0\n    ) / restaurantReviewIds.length\n  );\n};\n\nexport const selectRestaurantRatingMemoCreater = () =>\n  createSelector(\n    [selectReviewsByRestaurantId, selectReviewEntities],\n    (restaurantReviewIds, reviewEntities) =>\n      Math.floor(\n        restaurantReviewIds.reduce(\n          (ratingSum, reviewId) =>\n            ratingSum + reviewEntities[reviewId]?.rating || 0,\n          0\n        ) / restaurantReviewIds.length\n      )\n  );\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}