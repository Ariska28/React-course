{"ast":null,"code":"import { failLoading, RESTAURANT_ACTIONS, startLoading, successLoading } from \"../actions\";\nimport { normolize } from \"../../utils/normolize\";\nimport { selectRestaurantIds } from \"../selectors\";\nexport const loadRestaurantsIfNotExist = store => next => action => {\n  var _selectRestaurantIds;\n\n  if (action.type !== RESTAURANT_ACTIONS.loadRestaurants) {\n    next(action);\n    return;\n  }\n\n  if (((_selectRestaurantIds = selectRestaurantIds(store.getState())) === null || _selectRestaurantIds === void 0 ? void 0 : _selectRestaurantIds.length) > 0) {\n    return;\n  }\n\n  console.store.dispatch(startLoading());\n  fetch(\"http://localhost:3001/api/restaurants/\").then(response => response.json()).then(restaurants => {\n    store.dispatch(successLoading(normolize(restaurants)));\n  }).catch(() => {\n    console.log(\"error\");\n    store.dispatch(failLoading());\n  });\n};","map":{"version":3,"names":["failLoading","RESTAURANT_ACTIONS","startLoading","successLoading","normolize","selectRestaurantIds","loadRestaurantsIfNotExist","store","next","action","type","loadRestaurants","getState","length","console","dispatch","fetch","then","response","json","restaurants","catch","log"],"sources":["/Users/Arina.Karmanova/Documents/react-2022-09-22/src/store/restaurant/middlewares/loadRestaurantsIfNotExist.js"],"sourcesContent":["import {\n  failLoading,\n  RESTAURANT_ACTIONS,\n  startLoading,\n  successLoading,\n} from \"../actions\";\nimport { normolize } from \"../../utils/normolize\";\nimport { selectRestaurantIds } from \"../selectors\";\n\nexport const loadRestaurantsIfNotExist = (store) => (next) => (action) => {\n  if (action.type !== RESTAURANT_ACTIONS.loadRestaurants) {\n    next(action);\n    return;\n  }\n\n  if (selectRestaurantIds(store.getState())?.length > 0) {\n    return;\n  }\n  console.\n  store.dispatch(startLoading());\n\n  fetch(\"http://localhost:3001/api/restaurants/\")\n    .then((response) => response.json())\n    .then((restaurants) => {\n      store.dispatch(successLoading(normolize(restaurants)));\n    })\n    .catch(() => {\n      console.log(\"error\");\n      store.dispatch(failLoading());\n    });\n};\n"],"mappings":"AAAA,SACEA,WADF,EAEEC,kBAFF,EAGEC,YAHF,EAIEC,cAJF,QAKO,YALP;AAMA,SAASC,SAAT,QAA0B,uBAA1B;AACA,SAASC,mBAAT,QAAoC,cAApC;AAEA,OAAO,MAAMC,yBAAyB,GAAIC,KAAD,IAAYC,IAAD,IAAWC,MAAD,IAAY;EAAA;;EACxE,IAAIA,MAAM,CAACC,IAAP,KAAgBT,kBAAkB,CAACU,eAAvC,EAAwD;IACtDH,IAAI,CAACC,MAAD,CAAJ;IACA;EACD;;EAED,IAAI,yBAAAJ,mBAAmB,CAACE,KAAK,CAACK,QAAN,EAAD,CAAnB,8EAAuCC,MAAvC,IAAgD,CAApD,EAAuD;IACrD;EACD;;EACDC,OAAO,CACPP,KADA,CACMQ,QADN,CACeb,YAAY,EAD3B;EAGAc,KAAK,CAAC,wCAAD,CAAL,CACGC,IADH,CACSC,QAAD,IAAcA,QAAQ,CAACC,IAAT,EADtB,EAEGF,IAFH,CAESG,WAAD,IAAiB;IACrBb,KAAK,CAACQ,QAAN,CAAeZ,cAAc,CAACC,SAAS,CAACgB,WAAD,CAAV,CAA7B;EACD,CAJH,EAKGC,KALH,CAKS,MAAM;IACXP,OAAO,CAACQ,GAAR,CAAY,OAAZ;IACAf,KAAK,CAACQ,QAAN,CAAef,WAAW,EAA1B;EACD,CARH;AASD,CArBM"},"metadata":{},"sourceType":"module"}