{"ast":null,"code":"class Store {\n  constructor(rootReducer) {\n    this.rootReducer = rootReducer;\n    this.state = this.rootReducer();\n  }\n\n  subscribe(key, callback) {\n    if (typeof callback === 'function') {\n      this.subscribers[key] = callback;\n      this.subscribers[key](this.state);\n\n      const unsubscribe = () => delete this.subscribers[key];\n\n      return unsubscribe.bind(this);\n    }\n  }\n\n  dispatch(action) {\n    this.state = this.rootReducer(this.state, action);\n    Object.values(this.subscribers).forEach(callback => callback(this.state));\n  }\n\n}\n\n;\nexport const createStore = (() => {\n  let store;\n  return rootReducer => {\n    if (!store) {\n      store = new Store(rootReducer);\n    }\n\n    return store;\n  };\n})();","map":{"version":3,"names":["Store","constructor","rootReducer","state","subscribe","key","callback","subscribers","unsubscribe","bind","dispatch","action","Object","values","forEach","createStore","store"],"sources":["/Users/Arina.Karmanova/Documents/react-2022-09-22/src/CustomStore/store.js"],"sourcesContent":["class Store {\n  state;\n  rootReducer;\n  subscribers;\n\n  constructor(rootReducer) {\n    this.rootReducer = rootReducer;\n    this.state = this.rootReducer();\n  }\n  subscribe(key, callback) {\n    if(typeof callback === 'function') {\n      this.subscribers[key] = callback;\n      this.subscribers[key](this.state);\n\n      const unsubscribe = () => delete this.subscribers[key];\n\n      return unsubscribe.bind(this);\n    }\n  }\n\n  dispatch(action) {\n    this.state = this.rootReducer(this.state, action);\n\n    Object.values(this.subscribers).forEach((callback) => callback(this.state));\n  }\n\n};\n\nexport const createStore = (() => {\n  let store;\n\n  return (rootReducer) => {\n    if(!store) {\n      store = new Store(rootReducer);\n    }\n\n    return store;\n  }\n})();"],"mappings":"AAAA,MAAMA,KAAN,CAAY;EAKVC,WAAW,CAACC,WAAD,EAAc;IACvB,KAAKA,WAAL,GAAmBA,WAAnB;IACA,KAAKC,KAAL,GAAa,KAAKD,WAAL,EAAb;EACD;;EACDE,SAAS,CAACC,GAAD,EAAMC,QAAN,EAAgB;IACvB,IAAG,OAAOA,QAAP,KAAoB,UAAvB,EAAmC;MACjC,KAAKC,WAAL,CAAiBF,GAAjB,IAAwBC,QAAxB;MACA,KAAKC,WAAL,CAAiBF,GAAjB,EAAsB,KAAKF,KAA3B;;MAEA,MAAMK,WAAW,GAAG,MAAM,OAAO,KAAKD,WAAL,CAAiBF,GAAjB,CAAjC;;MAEA,OAAOG,WAAW,CAACC,IAAZ,CAAiB,IAAjB,CAAP;IACD;EACF;;EAEDC,QAAQ,CAACC,MAAD,EAAS;IACf,KAAKR,KAAL,GAAa,KAAKD,WAAL,CAAiB,KAAKC,KAAtB,EAA6BQ,MAA7B,CAAb;IAEAC,MAAM,CAACC,MAAP,CAAc,KAAKN,WAAnB,EAAgCO,OAAhC,CAAyCR,QAAD,IAAcA,QAAQ,CAAC,KAAKH,KAAN,CAA9D;EACD;;AAxBS;;AA0BX;AAED,OAAO,MAAMY,WAAW,GAAG,CAAC,MAAM;EAChC,IAAIC,KAAJ;EAEA,OAAQd,WAAD,IAAiB;IACtB,IAAG,CAACc,KAAJ,EAAW;MACTA,KAAK,GAAG,IAAIhB,KAAJ,CAAUE,WAAV,CAAR;IACD;;IAED,OAAOc,KAAP;EACD,CAND;AAOD,CAV0B,GAApB"},"metadata":{},"sourceType":"module"}