{"ast":null,"code":"class store {\n  constructor(rootReducer) {\n    this.rootReducer = rootReducer;\n    this.state = this.rootReducer();\n  }\n\n  subscribe(key, callback) {\n    if (typeof callback === 'function') {\n      this.subscribers[key] = callback;\n      this.subscribers[key](this.state);\n\n      const unsubscribe = () => delete this.subscribers[key];\n\n      return unsubscribe.bind(this);\n    }\n  }\n\n  dispatch(action) {\n    this.state = this.rootReducer(this.state, action);\n    Object.values(this.subscribers).forEach(callback => callback(this.state));\n  }\n\n}\n\n;\nexport function createStore(rootReducer) {\n  store.rootReducer = rootReducer;\n  return new Store(rootReducer);\n}","map":{"version":3,"names":["store","constructor","rootReducer","state","subscribe","key","callback","subscribers","unsubscribe","bind","dispatch","action","Object","values","forEach","createStore","Store"],"sources":["/Users/Arina.Karmanova/Documents/react-2022-09-22/src/CustomStore/store.js"],"sourcesContent":["class store {\n  state;\n  rootReducer;\n  subscribers;\n\n  constructor(rootReducer) {\n    this.rootReducer = rootReducer;\n    this.state = this.rootReducer();\n  }\n  subscribe(key, callback) {\n    if(typeof callback === 'function') {\n      this.subscribers[key] = callback;\n      this.subscribers[key](this.state);\n\n      const unsubscribe = () => delete this.subscribers[key];\n\n      return unsubscribe.bind(this);\n    }\n  }\n\n  dispatch(action) {\n    this.state = this.rootReducer(this.state, action);\n\n    Object.values(this.subscribers).forEach((callback) => callback(this.state));\n  }\n\n};\n\nexport function createStore(rootReducer) {\n  store.rootReducer = rootReducer;\n\n  return new Store(rootReducer);\n}"],"mappings":"AAAA,MAAMA,KAAN,CAAY;EAKVC,WAAW,CAACC,WAAD,EAAc;IACvB,KAAKA,WAAL,GAAmBA,WAAnB;IACA,KAAKC,KAAL,GAAa,KAAKD,WAAL,EAAb;EACD;;EACDE,SAAS,CAACC,GAAD,EAAMC,QAAN,EAAgB;IACvB,IAAG,OAAOA,QAAP,KAAoB,UAAvB,EAAmC;MACjC,KAAKC,WAAL,CAAiBF,GAAjB,IAAwBC,QAAxB;MACA,KAAKC,WAAL,CAAiBF,GAAjB,EAAsB,KAAKF,KAA3B;;MAEA,MAAMK,WAAW,GAAG,MAAM,OAAO,KAAKD,WAAL,CAAiBF,GAAjB,CAAjC;;MAEA,OAAOG,WAAW,CAACC,IAAZ,CAAiB,IAAjB,CAAP;IACD;EACF;;EAEDC,QAAQ,CAACC,MAAD,EAAS;IACf,KAAKR,KAAL,GAAa,KAAKD,WAAL,CAAiB,KAAKC,KAAtB,EAA6BQ,MAA7B,CAAb;IAEAC,MAAM,CAACC,MAAP,CAAc,KAAKN,WAAnB,EAAgCO,OAAhC,CAAyCR,QAAD,IAAcA,QAAQ,CAAC,KAAKH,KAAN,CAA9D;EACD;;AAxBS;;AA0BX;AAED,OAAO,SAASY,WAAT,CAAqBb,WAArB,EAAkC;EACvCF,KAAK,CAACE,WAAN,GAAoBA,WAApB;EAEA,OAAO,IAAIc,KAAJ,CAAUd,WAAV,CAAP;AACD"},"metadata":{},"sourceType":"module"}