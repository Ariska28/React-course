{"ast":null,"code":"class Store {\n  constructor(rootReducer) {\n    this.subscribers = {};\n    this.rootReducer = rootReducer;\n    this.state = this.rootReducer();\n  }\n\n  subscribe(key, callback) {\n    if (typeof callback === 'function') {\n      this.subscribers[key] = callback;\n      this.subscribers[key](this.state);\n    }\n  }\n\n  dispatch(action) {\n    this.state = this.rootReducer(this.state, action);\n    Object.values(this.subscribers).forEach(callback => callback(this.state));\n  }\n\n}\n\n;\nexport const createStore = (() => {\n  let store;\n  return rootReducer => {\n    if (!store) {\n      store = new Store(rootReducer);\n    }\n\n    return store;\n  };\n})();","map":{"version":3,"names":["Store","constructor","rootReducer","subscribers","state","subscribe","key","callback","dispatch","action","Object","values","forEach","createStore","store"],"sources":["/Users/Arina.Karmanova/Documents/react-2022-09-22/src/CustomStore/store.js"],"sourcesContent":["class Store {\n  state;\n  rootReducer;\n  subscribers = {};\n\n  constructor(rootReducer) {\n    this.rootReducer = rootReducer;\n    this.state = this.rootReducer();\n  }\n  subscribe(key, callback) {\n    if(typeof callback === 'function') {\n      this.subscribers[key] = callback;\n      this.subscribers[key](this.state);\n\n     \n    }\n  }\n\n  dispatch(action) {\n    this.state = this.rootReducer(this.state, action);\n\n    Object.values(this.subscribers).forEach((callback) => callback(this.state));\n  }\n\n};\n\nexport const createStore = (() => {\n  let store;\n\n  return (rootReducer) => {\n    if(!store) {\n      store = new Store(rootReducer);\n    }\n\n    return store;\n  }\n})();"],"mappings":"AAAA,MAAMA,KAAN,CAAY;EAKVC,WAAW,CAACC,WAAD,EAAc;IAAA,KAFzBC,WAEyB,GAFX,EAEW;IACvB,KAAKD,WAAL,GAAmBA,WAAnB;IACA,KAAKE,KAAL,GAAa,KAAKF,WAAL,EAAb;EACD;;EACDG,SAAS,CAACC,GAAD,EAAMC,QAAN,EAAgB;IACvB,IAAG,OAAOA,QAAP,KAAoB,UAAvB,EAAmC;MACjC,KAAKJ,WAAL,CAAiBG,GAAjB,IAAwBC,QAAxB;MACA,KAAKJ,WAAL,CAAiBG,GAAjB,EAAsB,KAAKF,KAA3B;IAGD;EACF;;EAEDI,QAAQ,CAACC,MAAD,EAAS;IACf,KAAKL,KAAL,GAAa,KAAKF,WAAL,CAAiB,KAAKE,KAAtB,EAA6BK,MAA7B,CAAb;IAEAC,MAAM,CAACC,MAAP,CAAc,KAAKR,WAAnB,EAAgCS,OAAhC,CAAyCL,QAAD,IAAcA,QAAQ,CAAC,KAAKH,KAAN,CAA9D;EACD;;AAtBS;;AAwBX;AAED,OAAO,MAAMS,WAAW,GAAG,CAAC,MAAM;EAChC,IAAIC,KAAJ;EAEA,OAAQZ,WAAD,IAAiB;IACtB,IAAG,CAACY,KAAJ,EAAW;MACTA,KAAK,GAAG,IAAId,KAAJ,CAAUE,WAAV,CAAR;IACD;;IAED,OAAOY,KAAP;EACD,CAND;AAOD,CAV0B,GAApB"},"metadata":{},"sourceType":"module"}