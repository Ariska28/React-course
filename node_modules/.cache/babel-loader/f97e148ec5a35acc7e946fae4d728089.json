{"ast":null,"code":"import { failLoading, startLoading, successLoading } from \"../actions\";\nimport { normolize } from \"../../utils/normolize\";\nimport { selectRestaurantIds } from \"../selectors\";\nexport const loadRestaurantsIfNotExist = (dispatch, getState) => {\n  var _selectRestaurantIds;\n\n  if (((_selectRestaurantIds = selectRestaurantIds(getState())) === null || _selectRestaurantIds === void 0 ? void 0 : _selectRestaurantIds.length) > 0) {\n    return;\n  }\n\n  dispatch(startLoading());\n  fetch(\"http://localhost:3001/api/restaurants/\").then(response => response.json()).then(restaurants => {\n    console.log(restaurants);\n    dispatch(successLoading(normolize(restaurants)));\n  }).catch(() => {\n    console.log(\"error\");\n    dispatch(failLoading());\n  });\n};","map":{"version":3,"names":["failLoading","startLoading","successLoading","normolize","selectRestaurantIds","loadRestaurantsIfNotExist","dispatch","getState","length","fetch","then","response","json","restaurants","console","log","catch"],"sources":["/Users/Arina.Karmanova/Documents/react-2022-09-22/src/store/restaurant/middlewares/loadRestaurantsIfNotExist.js"],"sourcesContent":["import { failLoading, startLoading, successLoading } from \"../actions\";\nimport { normolize } from \"../../utils/normolize\";\nimport { selectRestaurantIds } from \"../selectors\";\n\nexport const loadRestaurantsIfNotExist = (dispatch, getState) => {\n  if (selectRestaurantIds(getState())?.length > 0) {\n    return;\n  }\n\n  dispatch(startLoading());\n\n  fetch(\"http://localhost:3001/api/restaurants/\")\n    .then((response) => response.json())\n    .then((restaurants) => {\n      console.log(restaurants);\n      dispatch(successLoading(normolize(restaurants)));\n    })\n    .catch(() => {\n      console.log(\"error\");\n      dispatch(failLoading());\n    });\n};\n"],"mappings":"AAAA,SAASA,WAAT,EAAsBC,YAAtB,EAAoCC,cAApC,QAA0D,YAA1D;AACA,SAASC,SAAT,QAA0B,uBAA1B;AACA,SAASC,mBAAT,QAAoC,cAApC;AAEA,OAAO,MAAMC,yBAAyB,GAAG,CAACC,QAAD,EAAWC,QAAX,KAAwB;EAAA;;EAC/D,IAAI,yBAAAH,mBAAmB,CAACG,QAAQ,EAAT,CAAnB,8EAAiCC,MAAjC,IAA0C,CAA9C,EAAiD;IAC/C;EACD;;EAEDF,QAAQ,CAACL,YAAY,EAAb,CAAR;EAEAQ,KAAK,CAAC,wCAAD,CAAL,CACGC,IADH,CACSC,QAAD,IAAcA,QAAQ,CAACC,IAAT,EADtB,EAEGF,IAFH,CAESG,WAAD,IAAiB;IACrBC,OAAO,CAACC,GAAR,CAAYF,WAAZ;IACAP,QAAQ,CAACJ,cAAc,CAACC,SAAS,CAACU,WAAD,CAAV,CAAf,CAAR;EACD,CALH,EAMGG,KANH,CAMS,MAAM;IACXF,OAAO,CAACC,GAAR,CAAY,OAAZ;IACAT,QAAQ,CAACN,WAAW,EAAZ,CAAR;EACD,CATH;AAUD,CAjBM"},"metadata":{},"sourceType":"module"}