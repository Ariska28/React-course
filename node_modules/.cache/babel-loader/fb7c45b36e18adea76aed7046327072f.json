{"ast":null,"code":"import { normolize } from \"../../utils/normolize\";\nimport { selectRestaurantIds } from \"../selectors\";\nimport { restaurantSlice } from \"../index\";\nexport const loadRestaurantsIfNotExist = (dispatch, getState) => {\n  var _selectRestaurantIds;\n\n  if (((_selectRestaurantIds = selectRestaurantIds(getState())) === null || _selectRestaurantIds === void 0 ? void 0 : _selectRestaurantIds.length) > 0) {\n    return;\n  }\n\n  dispatch(restaurantSlice.actions.startLoading());\n  fetch(\"http://localhost:3001/api/restaurants/\").then(response => response.json()).then(restaurants => {\n    console.log(restaurants);\n    dispatch(restaurantSlice.actions.successLoading(normolize(restaurants)));\n  }).catch(() => {\n    console.log(\"error\");\n    dispatch(restaurantSlice.actions.failLoading());\n  });\n};","map":{"version":3,"names":["normolize","selectRestaurantIds","restaurantSlice","loadRestaurantsIfNotExist","dispatch","getState","length","actions","startLoading","fetch","then","response","json","restaurants","console","log","successLoading","catch","failLoading"],"sources":["/Users/Arina.Karmanova/Documents/react-2022-09-22/src/store/restaurant/middlewares/loadRestaurantsIfNotExist.js"],"sourcesContent":["import { normolize } from \"../../utils/normolize\";\nimport { selectRestaurantIds } from \"../selectors\";\nimport { restaurantSlice } from \"../index\";\n\nexport const loadRestaurantsIfNotExist = (dispatch, getState) => {\n  if (selectRestaurantIds(getState())?.length > 0) {\n    return;\n  }\n  dispatch(restaurantSlice.actions.startLoading());\n\n  fetch(\"http://localhost:3001/api/restaurants/\")\n    .then((response) => response.json())\n    .then((restaurants) => {\n      console.log(restaurants);\n      dispatch(restaurantSlice.actions.successLoading(normolize(restaurants)));\n    })\n    .catch(() => {\n      console.log(\"error\");\n      dispatch(restaurantSlice.actions.failLoading());\n    });\n};\n"],"mappings":"AAAA,SAASA,SAAT,QAA0B,uBAA1B;AACA,SAASC,mBAAT,QAAoC,cAApC;AACA,SAASC,eAAT,QAAgC,UAAhC;AAEA,OAAO,MAAMC,yBAAyB,GAAG,CAACC,QAAD,EAAWC,QAAX,KAAwB;EAAA;;EAC/D,IAAI,yBAAAJ,mBAAmB,CAACI,QAAQ,EAAT,CAAnB,8EAAiCC,MAAjC,IAA0C,CAA9C,EAAiD;IAC/C;EACD;;EACDF,QAAQ,CAACF,eAAe,CAACK,OAAhB,CAAwBC,YAAxB,EAAD,CAAR;EAEAC,KAAK,CAAC,wCAAD,CAAL,CACGC,IADH,CACSC,QAAD,IAAcA,QAAQ,CAACC,IAAT,EADtB,EAEGF,IAFH,CAESG,WAAD,IAAiB;IACrBC,OAAO,CAACC,GAAR,CAAYF,WAAZ;IACAT,QAAQ,CAACF,eAAe,CAACK,OAAhB,CAAwBS,cAAxB,CAAuChB,SAAS,CAACa,WAAD,CAAhD,CAAD,CAAR;EACD,CALH,EAMGI,KANH,CAMS,MAAM;IACXH,OAAO,CAACC,GAAR,CAAY,OAAZ;IACAX,QAAQ,CAACF,eAAe,CAACK,OAAhB,CAAwBW,WAAxB,EAAD,CAAR;EACD,CATH;AAUD,CAhBM"},"metadata":{},"sourceType":"module"}